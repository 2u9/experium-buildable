//Deobfuscated with https://github.com/SimplyProgrammer/Minecraft-Deobfuscator3000 using mappings "C:\Users\Luni\Documents\1.12 stable mappings"!

// 
// Decompiled by Procyon v0.5.36
// 

package dev._3000IQPlay.experium.features.modules.exploit;

import net.minecraft.util.math.Vec3d;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.network.Packet;
import net.minecraft.entity.Entity;
import net.minecraft.network.play.client.CPacketEntityAction;
import dev._3000IQPlay.experium.util.MathUtil;
import dev._3000IQPlay.experium.features.setting.Setting;
import dev._3000IQPlay.experium.features.modules.Module;

public class Clip extends Module
{
    public final Setting<Mode> mode;
    public final Setting<VMode> vmode;
    public final Setting<HMode> hmode;
    public final Setting<Boolean> disables;
    public final Setting<Double> clipAmount;
    public final Setting<Boolean> autoAdjust;
    public final Setting<Double> offset;
    boolean isSneaking;
    
    public Clip() {
        super("Clip", "Automatically clips you into blocks", Category.EXPLOIT, true, false, false);
        this.mode = (Setting<Mode>)this.register(new Setting("Clip Mode", (T)Mode.Vertical));
        this.vmode = (Setting<VMode>)this.register(new Setting("V Mode", (T)VMode.Bypass, v -> this.mode.getValue() == Mode.Vertical));
        this.hmode = (Setting<HMode>)this.register(new Setting("H Mode", (T)HMode.Normal, v -> this.mode.getValue() == Mode.Horizontal));
        this.disables = (Setting<Boolean>)this.register(new Setting("Disables", (T)true));
        this.clipAmount = (Setting<Double>)this.register(new Setting("Clip Amount", (T)(-3.0), (T)(-10.0), (T)10.0));
        this.autoAdjust = (Setting<Boolean>)this.register(new Setting("Auto Adjust", (T)true));
        this.offset = (Setting<Double>)this.register(new Setting("Offset", (T)(-4.0), (T)(-70.0), (T)70.0));
    }
    
    @Override
    public void onUpdate() {
        if (nullCheck()) {
            return;
        }
        final Vec3d dir = MathUtil.direction(Clip.mc.player.rotationYaw);
        if (this.mode.getValue() == Mode.Vertical && this.vmode.getValue() == VMode.Normal) {
            Clip.mc.player.setPosition(Clip.mc.player.posX, Clip.mc.player.posY + this.clipAmount.getValue(), Clip.mc.player.posZ);
            if (this.disables.getValue()) {
                this.disable();
            }
        }
        if (this.mode.getValue() == Mode.Horizontal && this.hmode.getValue() == HMode.Normal) {
            Clip.mc.player.setPosition(Clip.mc.player.posX + dir.x * this.clipAmount.getValue(), Clip.mc.player.posY, Clip.mc.player.posZ + dir.z * this.clipAmount.getValue());
            if (this.disables.getValue()) {
                this.disable();
            }
        }
        if (this.mode.getValue() == Mode.Vertical && this.vmode.getValue() == VMode.Bypass) {
            if (this.autoAdjust.getValue()) {
                this.offset.setValue(-Clip.mc.player.posY - 2.0);
            }
            if (this.isSneaking) {
                Clip.mc.player.connection.sendPacket((Packet)new CPacketEntityAction((Entity)Clip.mc.player, CPacketEntityAction.Action.STOP_SNEAKING));
                this.isSneaking = false;
            }
            Clip.mc.player.connection.sendPacket((Packet)new CPacketPlayer.Position(Clip.mc.player.posX, Clip.mc.player.posY + this.offset.getValue(), Clip.mc.player.posZ, false));
            Clip.mc.player.connection.sendPacket((Packet)new CPacketPlayer.Position(Clip.mc.player.posX, Clip.mc.player.posY + 0.41999998688698, Clip.mc.player.posZ, true));
            Clip.mc.player.connection.sendPacket((Packet)new CPacketPlayer.Position(Clip.mc.player.posX, Clip.mc.player.posY + 0.7531999805211997, Clip.mc.player.posZ, true));
            Clip.mc.player.connection.sendPacket((Packet)new CPacketPlayer.Position(Clip.mc.player.posX, Clip.mc.player.posY + 1.00133597911214, Clip.mc.player.posZ, true));
            Clip.mc.player.connection.sendPacket((Packet)new CPacketPlayer.Position(Clip.mc.player.posX, Clip.mc.player.posY + 1.16610926093821, Clip.mc.player.posZ, true));
            Clip.mc.player.connection.sendPacket((Packet)new CPacketEntityAction((Entity)Clip.mc.player, CPacketEntityAction.Action.STOP_SNEAKING));
            Clip.mc.player.setSneaking(false);
        }
    }
    
    @Override
    public void onDisable() {
        if (Clip.mc.player == null) {
            return;
        }
        if (this.isSneaking) {
            Clip.mc.player.connection.sendPacket((Packet)new CPacketEntityAction((Entity)Clip.mc.player, CPacketEntityAction.Action.STOP_SNEAKING));
            this.isSneaking = false;
        }
    }
    
    @Override
    public void onEnable() {
        if (Clip.mc.player == null) {
            return;
        }
        if (this.mode.getValue() == Mode.Vertical && this.vmode.getValue() == VMode.Bypass) {
            Clip.mc.player.jump();
        }
    }
    
    public enum HMode
    {
        Normal;
    }
    
    public enum VMode
    {
        Normal, 
        Bypass;
    }
    
    public enum Mode
    {
        Vertical, 
        Horizontal;
    }
}
